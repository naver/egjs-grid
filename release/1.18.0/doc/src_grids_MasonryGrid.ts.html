<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Source: src/grids/MasonryGrid.ts | egjs::Grid - API</title>
    
    <meta name="description" content=".." />
    
        <meta name="keywords" content="Grid, Masonry, Justified, Layout, Packing, Frame, Square" />
        <meta name="keyword" content="Grid, Masonry, Justified, Layout, Packing, Frame, Square" />
    
    
    
    <meta property="og:title" content=""/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content=""/>
    
    <meta property="og:url" content=""/>
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <script src="scripts/jquery.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    
    <link rel="canonical" href="https://naver.github.io/egjs-grid/release/latest/doc/"/>
    
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/jaguar.css">
    
    
    <script>
    var config = {"monospaceLinks":true,"cleverLinks":true,"default":{"outputSourceFiles":true},"applicationName":"eg.Grid","disqus":"egjs","googleAnalytics":"G-4139M7LXY0","openGraph":{"title":"","type":"website","image":"","site_name":"","url":""},"meta":{"title":"egjs::Grid - API","description":"..","keyword":"Grid, Masonry, Justified, Layout, Packing, Frame, Square"},"linenums":true,"link":{"canonical":"https://naver.github.io/egjs-grid/release/latest/doc/"}};
    </script>
    

    
    <script type="text/javascript">
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', config.googleAnalytics]);
      _gaq.push(['_trackPageview']);
    
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
    
</head>
<body>
<div id="wrap" class="clearfix">
    
<div class="navigation">
    <h3 class="applicationName">
        <a href="//naver.github.io/egjs/"><img style="width:40px; height:20px;" src="img/type_white.svg"/></a>

        <!-- Homepage link (prefer link.home than applicationName) -->
        
        <a href="//naver.github.io/egjs-grid/">Grid</a>
        
    </h3>

    <div class="search">
        <input id="search" type="text" class="form-control input-sm" placeholder="Search Documentations">
    </div>
    <ul class="list">
        <li class="item">
            <span class="title">
                <a href="index.html">README</a>
            </span>
        </li>
    
        <!-- Non Grouping Version -->
        
            

<li class="item" data-name="Grid.PackingGrid">
    <span class="title">
        <a href="Grid.PackingGrid.html">Grid.PackingGrid</a>
        
    </span>
    <ul class="members itemMembers expends">
    
    <span class="subtitle">Members</span>
    
        <li data-name="Grid.PackingGrid#weightPriority"><a href="Grid.PackingGrid.html#weightPriority">weightPriority</a></li>
    
        <li data-name="Grid.PackingGrid#useFit"><a href="Grid.PackingGrid.html#useFit">useFit</a></li>
    
        <li data-name="Grid.PackingGrid#sizeWeight"><a href="Grid.PackingGrid.html#sizeWeight">sizeWeight</a></li>
    
        <li data-name="Grid.PackingGrid#ratioWeight"><a href="Grid.PackingGrid.html#ratioWeight">ratioWeight</a></li>
    
        <li data-name="Grid.PackingGrid#preserveUIOnDestroy"><a href="Grid.PackingGrid.html#preserveUIOnDestroy">preserveUIOnDestroy</a></li>
    
        <li data-name="Grid.PackingGrid#outlineSize"><a href="Grid.PackingGrid.html#outlineSize">outlineSize</a></li>
    
        <li data-name="Grid.PackingGrid#outlineLength"><a href="Grid.PackingGrid.html#outlineLength">outlineLength</a></li>
    
        <li data-name="Grid.PackingGrid#gap"><a href="Grid.PackingGrid.html#gap">gap</a></li>
    
        <li data-name="Grid.PackingGrid#defaultDirection"><a href="Grid.PackingGrid.html#defaultDirection">defaultDirection</a></li>
    
        <li data-name="Grid.PackingGrid#aspectRatio"><a href="Grid.PackingGrid.html#aspectRatio">aspectRatio</a></li>
    
    </ul>
    <ul class="typedefs itemMembers expends">
    
    <span class="subtitle">Typedefs</span>
    
        <li data-name="Grid.PackingGrid.PackingGridOptions"><a href="Grid.PackingGrid.html#.PackingGridOptions">PackingGridOptions</a></li>
    
    </ul>
    <ul class="methods itemMembers expends">
    
    <span class="subtitle">Methods</span>
    
        <li data-name="Grid.PackingGrid#updateItems"><a href="Grid.PackingGrid.html#updateItems">updateItems</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.PackingGrid#syncElements"><a href="Grid.PackingGrid.html#syncElements">syncElements</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.PackingGrid#setStatus"><a href="Grid.PackingGrid.html#setStatus">setStatus</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.PackingGrid#setOutlines"><a href="Grid.PackingGrid.html#setOutlines">setOutlines</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.PackingGrid#setItems"><a href="Grid.PackingGrid.html#setItems">setItems</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.PackingGrid#renderItems"><a href="Grid.PackingGrid.html#renderItems">renderItems</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.PackingGrid#getStatus"><a href="Grid.PackingGrid.html#getStatus">getStatus</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.PackingGrid#getOutlines"><a href="Grid.PackingGrid.html#getOutlines">getOutlines</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.PackingGrid#getItems"><a href="Grid.PackingGrid.html#getItems">getItems</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.PackingGrid#getContainerInlineSize"><a href="Grid.PackingGrid.html#getContainerInlineSize">getContainerInlineSize</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.PackingGrid#getContainerElement"><a href="Grid.PackingGrid.html#getContainerElement">getContainerElement</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.PackingGrid#getComputedOutlineSize"><a href="Grid.PackingGrid.html#getComputedOutlineSize">getComputedOutlineSize</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.PackingGrid#getComputedOutlineLength"><a href="Grid.PackingGrid.html#getComputedOutlineLength">getComputedOutlineLength</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.PackingGrid#getChildren"><a href="Grid.PackingGrid.html#getChildren">getChildren</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.PackingGrid#destroy"><a href="Grid.PackingGrid.html#destroy">destroy</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.PackingGrid#applyGrid"><a href="Grid.PackingGrid.html#applyGrid">applyGrid</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
    </ul>
    <ul class="events itemMembers expends">
    
    <span class="subtitle">Events</span>
    
        <li data-name="Grid.PackingGrid#event:renderComplete"><a href="Grid.PackingGrid.html#event:renderComplete">renderComplete</a></li>
    
        <li data-name="Grid.PackingGrid#event:contentError"><a href="Grid.PackingGrid.html#event:contentError">contentError</a></li>
    
    </ul>

    
</li>

        
            

<li class="item" data-name="Grid.MasonryGrid">
    <span class="title">
        <a href="Grid.MasonryGrid.html">Grid.MasonryGrid</a>
        
    </span>
    <ul class="members itemMembers expends">
    
    <span class="subtitle">Members</span>
    
        <li data-name="Grid.MasonryGrid#useFit"><a href="Grid.MasonryGrid.html#useFit">useFit</a></li>
    
        <li data-name="Grid.MasonryGrid#preserveUIOnDestroy"><a href="Grid.MasonryGrid.html#preserveUIOnDestroy">preserveUIOnDestroy</a></li>
    
        <li data-name="Grid.MasonryGrid#outlineSize"><a href="Grid.MasonryGrid.html#outlineSize">outlineSize</a></li>
    
        <li data-name="Grid.MasonryGrid#outlineLength"><a href="Grid.MasonryGrid.html#outlineLength">outlineLength</a></li>
    
        <li data-name="Grid.MasonryGrid#maxStretchColumnSize"><a href="Grid.MasonryGrid.html#maxStretchColumnSize">maxStretchColumnSize</a></li>
    
        <li data-name="Grid.MasonryGrid#gap"><a href="Grid.MasonryGrid.html#gap">gap</a></li>
    
        <li data-name="Grid.MasonryGrid#defaultDirection"><a href="Grid.MasonryGrid.html#defaultDirection">defaultDirection</a></li>
    
        <li data-name="Grid.MasonryGrid#columnSizeRatio"><a href="Grid.MasonryGrid.html#columnSizeRatio">columnSizeRatio</a></li>
    
        <li data-name="Grid.MasonryGrid#columnSize"><a href="Grid.MasonryGrid.html#columnSize">columnSize</a></li>
    
        <li data-name="Grid.MasonryGrid#column"><a href="Grid.MasonryGrid.html#column">column</a></li>
    
        <li data-name="Grid.MasonryGrid#align"><a href="Grid.MasonryGrid.html#align">align</a></li>
    
    </ul>
    <ul class="typedefs itemMembers expends">
    
    <span class="subtitle">Typedefs</span>
    
        <li data-name="Grid.MasonryGrid.MasonryGridOptions"><a href="Grid.MasonryGrid.html#.MasonryGridOptions">MasonryGridOptions</a></li>
    
    </ul>
    <ul class="methods itemMembers expends">
    
    <span class="subtitle">Methods</span>
    
        <li data-name="Grid.MasonryGrid#updateItems"><a href="Grid.MasonryGrid.html#updateItems">updateItems</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.MasonryGrid#syncElements"><a href="Grid.MasonryGrid.html#syncElements">syncElements</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.MasonryGrid#setStatus"><a href="Grid.MasonryGrid.html#setStatus">setStatus</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.MasonryGrid#setOutlines"><a href="Grid.MasonryGrid.html#setOutlines">setOutlines</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.MasonryGrid#setItems"><a href="Grid.MasonryGrid.html#setItems">setItems</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.MasonryGrid#renderItems"><a href="Grid.MasonryGrid.html#renderItems">renderItems</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.MasonryGrid#getStatus"><a href="Grid.MasonryGrid.html#getStatus">getStatus</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.MasonryGrid#getOutlines"><a href="Grid.MasonryGrid.html#getOutlines">getOutlines</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.MasonryGrid#getItems"><a href="Grid.MasonryGrid.html#getItems">getItems</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.MasonryGrid#getContainerInlineSize"><a href="Grid.MasonryGrid.html#getContainerInlineSize">getContainerInlineSize</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.MasonryGrid#getContainerElement"><a href="Grid.MasonryGrid.html#getContainerElement">getContainerElement</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.MasonryGrid#getComputedOutlineSize"><a href="Grid.MasonryGrid.html#getComputedOutlineSize">getComputedOutlineSize</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.MasonryGrid#getComputedOutlineLength"><a href="Grid.MasonryGrid.html#getComputedOutlineLength">getComputedOutlineLength</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.MasonryGrid#getChildren"><a href="Grid.MasonryGrid.html#getChildren">getChildren</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.MasonryGrid#destroy"><a href="Grid.MasonryGrid.html#destroy">destroy</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.MasonryGrid#applyGrid"><a href="Grid.MasonryGrid.html#applyGrid">applyGrid</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
    </ul>
    <ul class="events itemMembers expends">
    
    <span class="subtitle">Events</span>
    
        <li data-name="Grid.MasonryGrid#event:renderComplete"><a href="Grid.MasonryGrid.html#event:renderComplete">renderComplete</a></li>
    
        <li data-name="Grid.MasonryGrid#event:contentError"><a href="Grid.MasonryGrid.html#event:contentError">contentError</a></li>
    
    </ul>

    
</li>

        
            

<li class="item" data-name="Grid.JustifiedGrid">
    <span class="title">
        <a href="Grid.JustifiedGrid.html">Grid.JustifiedGrid</a>
        
    </span>
    <ul class="members itemMembers expends">
    
    <span class="subtitle">Members</span>
    
        <li data-name="Grid.JustifiedGrid#useFit"><a href="Grid.JustifiedGrid.html#useFit">useFit</a></li>
    
        <li data-name="Grid.JustifiedGrid#sizeRange"><a href="Grid.JustifiedGrid.html#sizeRange">sizeRange</a></li>
    
        <li data-name="Grid.JustifiedGrid#rowRange"><a href="Grid.JustifiedGrid.html#rowRange">rowRange</a></li>
    
        <li data-name="Grid.JustifiedGrid#preserveUIOnDestroy"><a href="Grid.JustifiedGrid.html#preserveUIOnDestroy">preserveUIOnDestroy</a></li>
    
        <li data-name="Grid.JustifiedGrid#outlineSize"><a href="Grid.JustifiedGrid.html#outlineSize">outlineSize</a></li>
    
        <li data-name="Grid.JustifiedGrid#outlineLength"><a href="Grid.JustifiedGrid.html#outlineLength">outlineLength</a></li>
    
        <li data-name="Grid.JustifiedGrid#isCroppedSize"><a href="Grid.JustifiedGrid.html#isCroppedSize">isCroppedSize</a></li>
    
        <li data-name="Grid.JustifiedGrid#gap"><a href="Grid.JustifiedGrid.html#gap">gap</a></li>
    
        <li data-name="Grid.JustifiedGrid#displayedRow"><a href="Grid.JustifiedGrid.html#displayedRow">displayedRow</a></li>
    
        <li data-name="Grid.JustifiedGrid#defaultDirection"><a href="Grid.JustifiedGrid.html#defaultDirection">defaultDirection</a></li>
    
        <li data-name="Grid.JustifiedGrid#columnRange"><a href="Grid.JustifiedGrid.html#columnRange">columnRange</a></li>
    
    </ul>
    <ul class="typedefs itemMembers expends">
    
    <span class="subtitle">Typedefs</span>
    
        <li data-name="Grid.JustifiedGrid.JustifiedGridOptions"><a href="Grid.JustifiedGrid.html#.JustifiedGridOptions">JustifiedGridOptions</a></li>
    
    </ul>
    <ul class="methods itemMembers expends">
    
    <span class="subtitle">Methods</span>
    
        <li data-name="Grid.JustifiedGrid#updateItems"><a href="Grid.JustifiedGrid.html#updateItems">updateItems</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.JustifiedGrid#syncElements"><a href="Grid.JustifiedGrid.html#syncElements">syncElements</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.JustifiedGrid#setStatus"><a href="Grid.JustifiedGrid.html#setStatus">setStatus</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.JustifiedGrid#setOutlines"><a href="Grid.JustifiedGrid.html#setOutlines">setOutlines</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.JustifiedGrid#setItems"><a href="Grid.JustifiedGrid.html#setItems">setItems</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.JustifiedGrid#renderItems"><a href="Grid.JustifiedGrid.html#renderItems">renderItems</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.JustifiedGrid#getStatus"><a href="Grid.JustifiedGrid.html#getStatus">getStatus</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.JustifiedGrid#getOutlines"><a href="Grid.JustifiedGrid.html#getOutlines">getOutlines</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.JustifiedGrid#getItems"><a href="Grid.JustifiedGrid.html#getItems">getItems</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.JustifiedGrid#getContainerInlineSize"><a href="Grid.JustifiedGrid.html#getContainerInlineSize">getContainerInlineSize</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.JustifiedGrid#getContainerElement"><a href="Grid.JustifiedGrid.html#getContainerElement">getContainerElement</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.JustifiedGrid#getComputedOutlineSize"><a href="Grid.JustifiedGrid.html#getComputedOutlineSize">getComputedOutlineSize</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.JustifiedGrid#getComputedOutlineLength"><a href="Grid.JustifiedGrid.html#getComputedOutlineLength">getComputedOutlineLength</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.JustifiedGrid#getChildren"><a href="Grid.JustifiedGrid.html#getChildren">getChildren</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.JustifiedGrid#destroy"><a href="Grid.JustifiedGrid.html#destroy">destroy</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.JustifiedGrid#applyGrid"><a href="Grid.JustifiedGrid.html#applyGrid">applyGrid</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
    </ul>
    <ul class="events itemMembers expends">
    
    <span class="subtitle">Events</span>
    
        <li data-name="Grid.JustifiedGrid#event:renderComplete"><a href="Grid.JustifiedGrid.html#event:renderComplete">renderComplete</a></li>
    
        <li data-name="Grid.JustifiedGrid#event:contentError"><a href="Grid.JustifiedGrid.html#event:contentError">contentError</a></li>
    
    </ul>

    
</li>

        
            

<li class="item" data-name="Grid.GridItem">
    <span class="title">
        <a href="Grid.GridItem.html">Grid.GridItem</a>
        
    </span>
    <ul class="members itemMembers expends">
    
    <span class="subtitle">Members</span>
    
        <li data-name="Grid.GridItem#shouldReupdate"><a href="Grid.GridItem.html#shouldReupdate">shouldReupdate</a></li>
    
        <li data-name="Grid.GridItem#orgInlineSize"><a href="Grid.GridItem.html#orgInlineSize">orgInlineSize</a></li>
    
        <li data-name="Grid.GridItem#orgContentSize"><a href="Grid.GridItem.html#orgContentSize">orgContentSize</a></li>
    
        <li data-name="Grid.GridItem#isUpdating"><a href="Grid.GridItem.html#isUpdating">isUpdating</a></li>
    
        <li data-name="Grid.GridItem#inlineSize"><a href="Grid.GridItem.html#inlineSize">inlineSize</a></li>
    
        <li data-name="Grid.GridItem#cssInlineSize"><a href="Grid.GridItem.html#cssInlineSize">cssInlineSize</a></li>
    
        <li data-name="Grid.GridItem#cssInlinePos"><a href="Grid.GridItem.html#cssInlinePos">cssInlinePos</a></li>
    
        <li data-name="Grid.GridItem#cssContentSize"><a href="Grid.GridItem.html#cssContentSize">cssContentSize</a></li>
    
        <li data-name="Grid.GridItem#cssContentPos"><a href="Grid.GridItem.html#cssContentPos">cssContentPos</a></li>
    
        <li data-name="Grid.GridItem#contentSize"><a href="Grid.GridItem.html#contentSize">contentSize</a></li>
    
        <li data-name="Grid.GridItem#computedInlineSize"><a href="Grid.GridItem.html#computedInlineSize">computedInlineSize</a></li>
    
        <li data-name="Grid.GridItem#computedInlinePos"><a href="Grid.GridItem.html#computedInlinePos">computedInlinePos</a></li>
    
        <li data-name="Grid.GridItem#computedContentSize"><a href="Grid.GridItem.html#computedContentSize">computedContentSize</a></li>
    
        <li data-name="Grid.GridItem#computedContentPos"><a href="Grid.GridItem.html#computedContentPos">computedContentPos</a></li>
    
    </ul>
    <ul class="typedefs itemMembers expends">
    
    <span class="subtitle">Typedefs</span>
    
        <li data-name="Grid.GridItem.GridItemStatus"><a href="Grid.GridItem.html#.GridItemStatus">GridItemStatus</a></li>
    
    </ul>
    <ul class="methods itemMembers expends">
    
    <span class="subtitle">Methods</span>
    
        <li data-name="Grid.GridItem#setCSSGridRect"><a href="Grid.GridItem.html#setCSSGridRect">setCSSGridRect</a></li>
    
        <li data-name="Grid.GridItem#getStatus"><a href="Grid.GridItem.html#getStatus">getStatus</a></li>
    
        <li data-name="Grid.GridItem#getMinimizedStatus"><a href="Grid.GridItem.html#getMinimizedStatus">getMinimizedStatus</a></li>
    
        <li data-name="Grid.GridItem#addCSSGridRect"><a href="Grid.GridItem.html#addCSSGridRect">addCSSGridRect</a></li>
    
    </ul>
    <ul class="events itemMembers expends">
    
    </ul>

    
</li>

        
            

<li class="item" data-name="Grid.FrameGrid">
    <span class="title">
        <a href="Grid.FrameGrid.html">Grid.FrameGrid</a>
        
    </span>
    <ul class="members itemMembers expends">
    
    <span class="subtitle">Members</span>
    
        <li data-name="Grid.FrameGrid#useFrameFill"><a href="Grid.FrameGrid.html#useFrameFill">useFrameFill</a></li>
    
        <li data-name="Grid.FrameGrid#useFit"><a href="Grid.FrameGrid.html#useFit">useFit</a></li>
    
        <li data-name="Grid.FrameGrid#rectSize"><a href="Grid.FrameGrid.html#rectSize">rectSize</a></li>
    
        <li data-name="Grid.FrameGrid#preserveUIOnDestroy"><a href="Grid.FrameGrid.html#preserveUIOnDestroy">preserveUIOnDestroy</a></li>
    
        <li data-name="Grid.FrameGrid#outlineSize"><a href="Grid.FrameGrid.html#outlineSize">outlineSize</a></li>
    
        <li data-name="Grid.FrameGrid#outlineLength"><a href="Grid.FrameGrid.html#outlineLength">outlineLength</a></li>
    
        <li data-name="Grid.FrameGrid#gap"><a href="Grid.FrameGrid.html#gap">gap</a></li>
    
        <li data-name="Grid.FrameGrid#frame"><a href="Grid.FrameGrid.html#frame">frame</a></li>
    
        <li data-name="Grid.FrameGrid#defaultDirection"><a href="Grid.FrameGrid.html#defaultDirection">defaultDirection</a></li>
    
    </ul>
    <ul class="typedefs itemMembers expends">
    
    <span class="subtitle">Typedefs</span>
    
        <li data-name="Grid.FrameGrid.FrameGridOptions"><a href="Grid.FrameGrid.html#.FrameGridOptions">FrameGridOptions</a></li>
    
    </ul>
    <ul class="methods itemMembers expends">
    
    <span class="subtitle">Methods</span>
    
        <li data-name="Grid.FrameGrid#updateItems"><a href="Grid.FrameGrid.html#updateItems">updateItems</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.FrameGrid#syncElements"><a href="Grid.FrameGrid.html#syncElements">syncElements</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.FrameGrid#setStatus"><a href="Grid.FrameGrid.html#setStatus">setStatus</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.FrameGrid#setOutlines"><a href="Grid.FrameGrid.html#setOutlines">setOutlines</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.FrameGrid#setItems"><a href="Grid.FrameGrid.html#setItems">setItems</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.FrameGrid#renderItems"><a href="Grid.FrameGrid.html#renderItems">renderItems</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.FrameGrid#getStatus"><a href="Grid.FrameGrid.html#getStatus">getStatus</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.FrameGrid#getOutlines"><a href="Grid.FrameGrid.html#getOutlines">getOutlines</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.FrameGrid#getItems"><a href="Grid.FrameGrid.html#getItems">getItems</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.FrameGrid#getContainerInlineSize"><a href="Grid.FrameGrid.html#getContainerInlineSize">getContainerInlineSize</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.FrameGrid#getContainerElement"><a href="Grid.FrameGrid.html#getContainerElement">getContainerElement</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.FrameGrid#getComputedOutlineSize"><a href="Grid.FrameGrid.html#getComputedOutlineSize">getComputedOutlineSize</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.FrameGrid#getComputedOutlineLength"><a href="Grid.FrameGrid.html#getComputedOutlineLength">getComputedOutlineLength</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.FrameGrid#getChildren"><a href="Grid.FrameGrid.html#getChildren">getChildren</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.FrameGrid#destroy"><a href="Grid.FrameGrid.html#destroy">destroy</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
        <li data-name="Grid.FrameGrid#applyGrid"><a href="Grid.FrameGrid.html#applyGrid">applyGrid</a> <img src="img/i.png" width="14" title="inherited" alt="inherited"></li>
    
    </ul>
    <ul class="events itemMembers expends">
    
    <span class="subtitle">Events</span>
    
        <li data-name="Grid.FrameGrid#event:renderComplete"><a href="Grid.FrameGrid.html#event:renderComplete">renderComplete</a></li>
    
        <li data-name="Grid.FrameGrid#event:contentError"><a href="Grid.FrameGrid.html#event:contentError">contentError</a></li>
    
    </ul>

    
</li>

        
            

<li class="item" data-name="Grid">
    <span class="title">
        <a href="Grid.html">Grid</a>
        
    </span>
    <ul class="members itemMembers expends">
    
    <span class="subtitle">Members</span>
    
        <li data-name="Grid#useFit"><a href="Grid.html#useFit">useFit</a></li>
    
        <li data-name="Grid#preserveUIOnDestroy"><a href="Grid.html#preserveUIOnDestroy">preserveUIOnDestroy</a></li>
    
        <li data-name="Grid#outlineSize"><a href="Grid.html#outlineSize">outlineSize</a></li>
    
        <li data-name="Grid#outlineLength"><a href="Grid.html#outlineLength">outlineLength</a></li>
    
        <li data-name="Grid#gap"><a href="Grid.html#gap">gap</a></li>
    
        <li data-name="Grid#defaultDirection"><a href="Grid.html#defaultDirection">defaultDirection</a></li>
    
    </ul>
    <ul class="typedefs itemMembers expends">
    
    <span class="subtitle">Typedefs</span>
    
        <li data-name="Grid.SizeRect"><a href="Grid.html#.SizeRect">SizeRect</a></li>
    
        <li data-name="Grid.RenderOptions"><a href="Grid.html#.RenderOptions">RenderOptions</a></li>
    
        <li data-name="Grid.OnRenderComplete"><a href="Grid.html#.OnRenderComplete">OnRenderComplete</a></li>
    
        <li data-name="Grid.OnContentError"><a href="Grid.html#.OnContentError">OnContentError</a></li>
    
        <li data-name="Grid.MasonryGridVerticalAlign"><a href="Grid.html#.MasonryGridVerticalAlign">MasonryGridVerticalAlign</a></li>
    
        <li data-name="Grid.GridStatus"><a href="Grid.html#.GridStatus">GridStatus</a></li>
    
        <li data-name="Grid.GridRect"><a href="Grid.html#.GridRect">GridRect</a></li>
    
        <li data-name="Grid.GridOutlines"><a href="Grid.html#.GridOutlines">GridOutlines</a></li>
    
        <li data-name="Grid.GridOptions"><a href="Grid.html#.GridOptions">GridOptions</a></li>
    
        <li data-name="Grid.GridAlign"><a href="Grid.html#.GridAlign">GridAlign</a></li>
    
        <li data-name="Grid.DOMRect"><a href="Grid.html#.DOMRect">DOMRect</a></li>
    
        <li data-name="Grid.DestroyOptions"><a href="Grid.html#.DestroyOptions">DestroyOptions</a></li>
    
    </ul>
    <ul class="methods itemMembers expends">
    
    <span class="subtitle">Methods</span>
    
        <li data-name="Grid#updateItems"><a href="Grid.html#updateItems">updateItems</a></li>
    
        <li data-name="Grid#syncElements"><a href="Grid.html#syncElements">syncElements</a></li>
    
        <li data-name="Grid#setStatus"><a href="Grid.html#setStatus">setStatus</a></li>
    
        <li data-name="Grid#setOutlines"><a href="Grid.html#setOutlines">setOutlines</a></li>
    
        <li data-name="Grid#setItems"><a href="Grid.html#setItems">setItems</a></li>
    
        <li data-name="Grid#renderItems"><a href="Grid.html#renderItems">renderItems</a></li>
    
        <li data-name="Grid#getStatus"><a href="Grid.html#getStatus">getStatus</a></li>
    
        <li data-name="Grid#getOutlines"><a href="Grid.html#getOutlines">getOutlines</a></li>
    
        <li data-name="Grid#getItems"><a href="Grid.html#getItems">getItems</a></li>
    
        <li data-name="Grid#getContainerInlineSize"><a href="Grid.html#getContainerInlineSize">getContainerInlineSize</a></li>
    
        <li data-name="Grid#getContainerElement"><a href="Grid.html#getContainerElement">getContainerElement</a></li>
    
        <li data-name="Grid#getComputedOutlineSize"><a href="Grid.html#getComputedOutlineSize">getComputedOutlineSize</a></li>
    
        <li data-name="Grid#getComputedOutlineLength"><a href="Grid.html#getComputedOutlineLength">getComputedOutlineLength</a></li>
    
        <li data-name="Grid#getChildren"><a href="Grid.html#getChildren">getChildren</a></li>
    
        <li data-name="Grid#destroy"><a href="Grid.html#destroy">destroy</a></li>
    
        <li data-name="Grid#applyGrid"><a href="Grid.html#applyGrid">applyGrid</a></li>
    
    </ul>
    <ul class="events itemMembers expends">
    
    <span class="subtitle">Events</span>
    
        <li data-name="Grid#event:renderComplete"><a href="Grid.html#event:renderComplete">renderComplete</a></li>
    
        <li data-name="Grid#event:contentError"><a href="Grid.html#event:contentError">contentError</a></li>
    
    </ul>

    
</li>

        
            

<li class="item" data-name="ComponentEvent">
    <span class="title">
        <a href="ComponentEvent.html">ComponentEvent</a>
        
    </span>
    <ul class="members itemMembers expends">
    
    <span class="subtitle">Members</span>
    
        <li data-name="ComponentEvent#eventType"><a href="ComponentEvent.html#eventType">eventType</a></li>
    
        <li data-name="ComponentEvent#currentTarget"><a href="ComponentEvent.html#currentTarget">currentTarget</a></li>
    
    </ul>
    <ul class="typedefs itemMembers expends">
    
    </ul>
    <ul class="methods itemMembers expends">
    
    <span class="subtitle">Methods</span>
    
        <li data-name="ComponentEvent#stop"><a href="ComponentEvent.html#stop">stop</a></li>
    
        <li data-name="ComponentEvent#isCanceled"><a href="ComponentEvent.html#isCanceled">isCanceled</a></li>
    
    </ul>
    <ul class="events itemMembers expends">
    
    </ul>

    
</li>

        
            

<li class="item" data-name="Component">
    <span class="title">
        <a href="Component.html">Component</a>
        
    </span>
    <ul class="members itemMembers expends">
    
    <span class="subtitle">Members</span>
    
        <li data-name="Component.VERSION"><a href="Component.html#.VERSION">VERSION</a></li>
    
    </ul>
    <ul class="typedefs itemMembers expends">
    
    </ul>
    <ul class="methods itemMembers expends">
    
    <span class="subtitle">Methods</span>
    
        <li data-name="Component#trigger"><a href="Component.html#trigger">trigger</a></li>
    
        <li data-name="Component#once"><a href="Component.html#once">once</a></li>
    
        <li data-name="Component#on"><a href="Component.html#on">on</a></li>
    
        <li data-name="Component#off"><a href="Component.html#off">off</a></li>
    
        <li data-name="Component#hasOn"><a href="Component.html#hasOn">hasOn</a></li>
    
    </ul>
    <ul class="events itemMembers expends">
    
    </ul>

    
</li>

        
    
    </ul>
</div>

    <div class="main">
        <h1 class="page-title" data-filename="src_grids_MasonryGrid.ts.html">Source: src/grids/MasonryGrid.ts</h1>
        


    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * egjs-grid
 * Copyright (c) 2021-present NAVER Corp.
 * MIT license
 */
import Grid from "../Grid";
import { PROPERTY_TYPE, UPDATE_STATE } from "../consts";
import { GridOptions, Properties, GridOutlines, GridAlign, MasonryGridVerticalAlign } from "../types";
import { range, GetterSetter, between, isString, throttle } from "../utils";
import { GridItem } from "../GridItem";


function getColumnPoint(
  outline: number[],
  columnIndex: number,
  columnCount: number,
  pointCaculationName: "max" | "min",
) {
  return Math[pointCaculationName](...outline.slice(columnIndex, columnIndex + columnCount));
}

function getColumnIndex(
  outline: number[],
  columnCount: number,
  nearestCalculationName: "max" | "min",
  startPos: number,
) {
  const length = outline.length - columnCount + 1;
  const pointCaculationName = nearestCalculationName === "max" ? "min" : "max";
  const indexCaculationName = nearestCalculationName === "max" ? "lastIndexOf" : "indexOf";
  const points = range(length).map((index) => {
    const point = getColumnPoint(outline, index, columnCount, pointCaculationName);

    return Math[pointCaculationName](startPos, point);
  });

  return points[indexCaculationName](Math[nearestCalculationName](...points));
}

/**
 * @typedef
 * @memberof Grid.MasonryGrid
 * @extends Grid.GridOptions
 */
export interface MasonryGridOptions extends GridOptions {
  /**
   * The number of columns. If the number of columns is 0, it is automatically calculated according to the size of the container. Can be used instead of outlineLength.
   * &lt;ko>열의 개수. 열의 개수가 0이라면, 컨테이너의 사이즈에 의해 계산이 된다. outlineLength 대신 사용할 수 있다.&lt;/ko>
   * @default 0
   */
  column?: number;
  /**
   * The size of the columns. If it is 0, it is calculated as the size of the first item in items. Can be used instead of outlineSize.
   * &lt;ko>열의 사이즈. 만약 열의 사이즈가 0이면, 아이템들의 첫번째 아이템의 사이즈로 계산이 된다. outlineSize 대신 사용할 수 있다.&lt;/ko>
   * @default 0
   */
  columnSize?: number;
  /**
   * The size ratio(inlineSize / contentSize) of the columns. 0 is not set. `true` is automatically calculated as orgInlineSize / orgContentSize.
   * &lt;ko>열의 사이즈 비율(inlineSize / contentSize). 0은 미설정이다. `true` 는 orgInlineSize / orgContentSize로 자동 계산이 된다.&lt;/ko>
   * @default 0
   */
  columnSizeRatio?: number | boolean;
  /**
   * Align of the position of the items. If you want to use `stretch`, be sure to set `column`, `columnSize` or `maxStretchColumnSize` option. ("start", "center", "end", "justify", "stretch")
   * &lt;ko>아이템들의 위치의 정렬. `stretch`를 사용하고 싶다면 `column`, `columnSize` 또는 `maxStretchColumnSize` 옵션을 설정해라.  ("start", "center", "end", "justify", "stretch")&lt;/ko>
   * @default "justify"
   */
  align?: GridAlign;
  /**
   * Content direction alignment of items. “Masonry” is sorted in the form of masonry. Others are applied as content direction alignment, similar to vertical-align of inline-block.
   * If you set multiple columns (`data-grid-column`), the screen may look strange.
   * &lt;ko>아이템들의 Content 방향의 정렬. "masonry"는 masonry 형태로 정렬이 된다. 그 외는 inline-block의 vertical-align과 유사하게 content 방향 정렬로 적용이 된다.칼럼(`data-grid-column` )을 여러개 설정하면 화면이 이상하게 보일 수 있다. &lt;/ko>
   * @default "masonry"
   */
  contentAlign?: MasonryGridVerticalAlign;
  /**
   * Difference Threshold for Counting Columns. Since offsetSize is calculated by rounding, the number of columns may not be accurate.
   * &lt;ko>칼럼 개수를 계산하기 위한 차이 임계값. offset 사이즈는 반올림으로 게산하기 때문에 정확하지 않을 수 있다.&lt;/ko>
   * @default 1
   */
  columnCalculationThreshold?: number;
  /**
   * If stretch is used, the column can be automatically calculated by setting the maximum size of the column that can be stretched.
   * &lt;ko>stretch를 사용한 경우 최대로 늘릴 수 있는 column의 사이즈를 설정하여 column을 자동 계산할 수 있다.&lt;/ko>
   * @default Infinity
   */
  maxStretchColumnSize?: number;

  /**
   * Adjust the contentSize of the items to make the outlines equal.
   * "scale-down": Scales down to fit the start of the item's outline.
   * "scale-center": Scales down or up to fit the center of the item's outline.
   * "scale-up": Scales up to fit the end of the item's outline.
   * &lt;ko>아이템들의 contentSize를 조절하여 outline을 동등하게 한다.
   * "scale-down": 아이템들의 아웃라인 시작 부분에 맞춰 축소시킨다.
   * "scale-center": 아이템들의 아웃라인 중간 부분에 맞춰 축소시키거나 확장시킨다.
   * "scale-up": 아이템들의 아웃라인 끝 부분에 맞춰 확장시킨다.&lt;/ko>
   * @default ""
   */
  stretchOutline?: "scale-down" | "scale-up" | "scale-center" | "";
  /**
   * When using stretchOutline, the contentSize of the items is adjusted to adjust the outline to a value between min and max. ([minSize, maxSize])
   * &lt;ko>stretchOutline를 사용하는 경우 아이템들의 contentSize를 조절하여 container의 outline을 min과 max 사이 값으로 조절한다. ([minSize, maxSize])&lt;/ko>
   * @default [0, Infinity]
   */
  stretchContainerSize?: number[];
  /**
   * adjust the minimum and maximum item size of the items. ([minSize, maxSize])
   * &lt;ko>아이템들의 item size 최소, 최대 크기를 조절한다. ([minSize, maxSize])&lt;/ko>
   * @default [0, Infinity]
   */
  stretchItemSize?: Array&lt;string | number>;
}

/**
 * MasonryGrid is a grid that stacks items with the same width as a stack of bricks. Adjust the width of all images to the same size, find the lowest height column, and insert a new item.
 * @ko MasonryGrid는 벽돌을 쌓아 올린 모양처럼 동일한 너비를 가진 아이템를 쌓는 레이아웃이다. 모든 이미지의 너비를 동일한 크기로 조정하고, 가장 높이가 낮은 열을 찾아 새로운 이미지를 삽입한다. 따라서 배치된 아이템 사이에 빈 공간이 생기지는 않지만 배치된 레이아웃의 아래쪽은 울퉁불퉁해진다.
 * @memberof Grid
 * @param {HTMLElement | string} container - A base element for a module &lt;ko>모듈을 적용할 기준 엘리먼트&lt;/ko>
 * @param {Grid.MasonryGrid.MasonryGridOptions} options - The option object of the MasonryGrid module &lt;ko>MasonryGrid 모듈의 옵션 객체&lt;/ko>
 */
@GetterSetter
export class MasonryGrid extends Grid&lt;MasonryGridOptions> {
  public static propertyTypes = {
    ...Grid.propertyTypes,
    column: PROPERTY_TYPE.RENDER_PROPERTY,
    columnSize: PROPERTY_TYPE.RENDER_PROPERTY,
    columnSizeRatio: PROPERTY_TYPE.RENDER_PROPERTY,
    align: PROPERTY_TYPE.RENDER_PROPERTY,
    columnCalculationThreshold: PROPERTY_TYPE.RENDER_PROPERTY,
    maxStretchColumnSize: PROPERTY_TYPE.RENDER_PROPERTY,
    contentAlign: PROPERTY_TYPE.RENDER_PROPERTY,
    stretchOutline: PROPERTY_TYPE.RENDER_PROPERTY,
    stretchContainerSize: PROPERTY_TYPE.RENDER_PROPERTY,
    stretchItemSize: PROPERTY_TYPE.RENDER_PROPERTY,
  };
  public static defaultOptions: Required&lt;MasonryGridOptions> = {
    ...Grid.defaultOptions,
    align: "justify",
    column: 0,
    columnSize: 0,
    columnSizeRatio: 0,
    columnCalculationThreshold: 0.5,
    maxStretchColumnSize: Infinity,
    contentAlign: "masonry",
    stretchOutline: "",
    stretchContainerSize: [0, Infinity],
    stretchItemSize: [0, Infinity],
  };

  public applyGrid(items: GridItem[], direction: "start" | "end", outline: number[]): GridOutlines {
    items.forEach((item) => {
      item.isRestoreOrgCSSText = false;
    });
    const columnSize = this.getComputedOutlineSize(items);
    const column = this.getComputedOutlineLength(items);

    // contentPos를 변경했는지에 따라 computedSize로 설정해야 함.
    let useComputedSize = false;
    const {
      align,
      observeChildren,
      columnSizeRatio,
      contentAlign,
      stretchOutline,
      stretchContainerSize,
      stretchItemSize,
    } = this.options;
    const inlineGap = this.getInlineGap();
    const contentGap = this.getContentGap();
    const outlineLength = outline.length;
    const itemsLength = items.length;
    const alignPoses = this._getAlignPoses(column, columnSize);
    const isEndDirection = direction === "end";
    const nearestCalculationName = isEndDirection ? "min" : "max";
    const pointCalculationName = isEndDirection ? "max" : "min";

    let startOutline = [0];

    if (outlineLength === column) {
      startOutline = outline.slice();
    } else {
      const point = outlineLength ? Math[pointCalculationName](...outline) : 0;

      startOutline = range(column).map(() => point);
    }
    let endOutline = startOutline.slice();
    const columnDist = column > 1 ? alignPoses[1] - alignPoses[0] : 0;
    const isStretch = align === "stretch";
    const isStartContentAlign = isEndDirection &amp;&amp; contentAlign === "start";
    const itemIndexes: number[][] = range(startOutline.length).map(() => []);



    let startPos = isEndDirection ? -Infinity : Infinity;


    if (isStartContentAlign) {
      // support only end direction
      startPos = Math.min(...endOutline);
    }


    for (let i = 0; i &lt; itemsLength; ++i) {
      const itemIndex = isEndDirection ? i : itemsLength - 1 - i;
      const item = items[itemIndex];
      const columnAttribute = parseInt(item.attributes.column || "1", 10);
      const maxColumnAttribute = parseInt(item.attributes.maxColumn || "1", 10);
      let contentSize = item.contentSize;
      let columnCount = Math.min(
        column,
        columnAttribute || Math.max(1, Math.ceil((item.inlineSize + inlineGap) / columnDist)),
      );
      const maxColumnCount = Math.min(column, Math.max(columnCount, maxColumnAttribute));
      let columnIndex = getColumnIndex(endOutline, columnCount, nearestCalculationName, startPos);
      let contentPos = getColumnPoint(endOutline, columnIndex, columnCount, pointCalculationName);

      if (isStartContentAlign &amp;&amp; startPos !== contentPos) {
        startPos = Math.max(...endOutline);
        endOutline = endOutline.map(() => startPos);
        contentPos = startPos;
        columnIndex = 0;
      }

      while (columnCount &lt; maxColumnCount) {
        const nextEndColumnIndex = columnIndex + columnCount;
        const nextColumnIndex = columnIndex - 1;

        if (isEndDirection &amp;&amp; (nextEndColumnIndex >= column || endOutline[nextEndColumnIndex] > contentPos)) {
          break;
        }
        if (!isEndDirection &amp;&amp; (nextColumnIndex &lt; 0 || endOutline[nextColumnIndex] &lt; contentPos)) {
          break;
        }
        if (!isEndDirection) {
          --columnIndex;
        }
        ++columnCount;
      }

      columnIndex = Math.max(0, columnIndex);
      columnCount = Math.min(column - columnIndex, columnCount);

      itemIndexes[columnIndex].push(itemIndex);

      // stretch mode or data-grid-column > "1"
      if ((columnAttribute > 0 &amp;&amp; columnCount > 1) || isStretch) {
        const nextInlineSize = (columnCount - 1) * columnDist + columnSize;

        if ((!this._isObserverEnabled() || !observeChildren) &amp;&amp; item.cssInlineSize !== nextInlineSize) {
          item.shouldReupdate = true;
        }
        item.cssInlineSize = nextInlineSize;
      }
      if (columnSizeRatio === true) {
        const ratio = item.orgContentSize / item.orgInlineSize;

        contentSize = item.computedInlineSize * ratio;
        item.cssContentSize = contentSize;
        useComputedSize = true;
      } else if (columnSizeRatio &amp;&amp; columnSizeRatio > 0) {
        contentSize = item.computedInlineSize / columnSizeRatio;
        item.cssContentSize = contentSize;
        useComputedSize = true;
      }
      // 배치가 조금 더 수월하기 위해서는 min, max scaling 1차 작업
      let minStretchSize = 0;
      let maxStretchSize = Infinity;
      let useStretchItemSize = false;

      if (isString(stretchItemSize[0])) {
        const [inline, content] = stretchItemSize[0].split(":").map((value) => parseFloat(value));

        minStretchSize = item.computedInlineSize * content / inline;
        useStretchItemSize = true;
      } else if (stretchItemSize[0]) {
        minStretchSize = stretchItemSize[0];
        useStretchItemSize = true;
      }
      if (isString(stretchItemSize[1])) {
        const [inline, content] = stretchItemSize[1].split(":").map((value) => parseFloat(value));

        maxStretchSize = item.computedInlineSize * content / inline;
        useStretchItemSize = true;
      } else if (stretchItemSize[1] &amp;&amp; isFinite(stretchItemSize[1])) {
        // 유한한 숫자라면 stretch 대상으로 판단
        maxStretchSize = stretchItemSize[1];
        useStretchItemSize = true;
      }
      const nextContentSize = between(contentSize, minStretchSize, maxStretchSize);


      // stretchItemSize를 사용한 케이스라면 반영
      if (useStretchItemSize) {
        contentSize = nextContentSize;
        item.cssContentSize = contentSize;
        useComputedSize = true;
      }
      const inlinePos = alignPoses[columnIndex];
      contentPos = isEndDirection ? contentPos : contentPos - contentGap - contentSize;

      item.cssInlinePos = inlinePos;
      item.cssContentPos = contentPos;
      const nextOutlinePoint = isEndDirection ? contentPos + contentSize + contentGap : contentPos;

      range(columnCount).forEach((indexOffset) => {
        endOutline[columnIndex + indexOffset] = nextOutlinePoint;
      });
    }

    if (stretchOutline &amp;&amp; items.length) {
      let scalePoint = 0;

      if (stretchOutline === "scale-up") {
        scalePoint = Math.max(...endOutline);
      } else if (stretchOutline === "scale-center") {
        scalePoint = (Math.max(...endOutline) + Math.min(...endOutline)) / 2;
      } else {
        // scale-down
        scalePoint = Math.min(...endOutline);
      }
      if (isEndDirection) {
        // end 방향이면 endOutline이 gap만큼 더 추가되어 있다.
        scalePoint -= contentGap;

        // 높이 제한
        const startPoint = Math.min(...startOutline);
        const nextHeight = between(
          // 높이
          scalePoint - startPoint,
          stretchContainerSize[0],
          stretchContainerSize[1],
        );

        scalePoint = nextHeight + startPoint;
      } else {
        // 높이 제한
        const startPoint = Math.max(...startOutline);
        const nextHeight = between(
          // 반대 방향의 경우 startPoint(start)가 scalePoint(end)보다 큰 숫자다.
          startPoint - scalePoint,
          stretchContainerSize[0],
          stretchContainerSize[1],
        );

        scalePoint = nextHeight - startPoint;
      }

      endOutline.forEach((point, i) => {
        const totalGap = (itemIndexes[i].length - 1) * contentGap;
        const startPoint = startOutline[i];
        const prevSize = Math.abs(point - startPoint) - (isEndDirection ? contentGap : 0) - totalGap;
        const nextSize = (Math.abs(scalePoint - startPoint) - totalGap);
        const scale = nextSize / prevSize;

        if (!prevSize || scale === 1 || !isFinite(scale)) {
          return;
        }
        if (isEndDirection) {
          endOutline[i] = scalePoint + contentGap;
        } else {
          endOutline[i] = scalePoint;
        }

        const length = itemIndexes[i].length;
        let prevPoint = isEndDirection ? startOutline[i] : startOutline[i] - contentGap;

        const itemInfos = itemIndexes[i].map((itemIndex, j) => {
          const item = items[itemIndex];
          const originalSize = useComputedSize
            ? item.computedContentSize
            : item.contentSize;
          let minStretchSize = 0;
          let maxStretchSize = Infinity;

          if (isString(stretchItemSize[0])) {
            const [inline, content] = stretchItemSize[0].split(":").map((value) => parseFloat(value));

            minStretchSize = item.computedInlineSize * content / inline;
          } else {
            minStretchSize = stretchItemSize[0];
          }
          if (isString(stretchItemSize[1])) {
            const [inline, content] = stretchItemSize[1].split(":").map((value) => parseFloat(value));

            maxStretchSize = item.computedInlineSize * content / inline;
          } else {
            maxStretchSize = stretchItemSize[1];
          }


          return {
            item,
            index: j,
            itemIndex,
            minSize: minStretchSize,
            originalSize,
            nextSize: originalSize,
            maxSize: maxStretchSize,
          };
        });

        if (scale > 1) {
          itemInfos.sort((a, b) => {
            return a.originalSize - b.originalSize;
          });
        } else {
          itemInfos.sort((a, b) => {
            return b.originalSize - a.originalSize;
          });
        }
        // minSize, maxSize 제한하여 scale을 적용한다.
        let sumPrevSize = 0;
        let sumNextSize = 0;
        itemInfos.forEach((itemInfo) => {
          // 이전까지의 합 scale은 점점 목표치(`scale`)에 다가가야 한다.
          // 그렇지 않는 경우는 max, min에 도달한 경우라고 판단.

          const nextScale = sumNextSize > nextSize ? scale : (nextSize - sumNextSize) / (prevSize - sumPrevSize);
          const prevItemSize = itemInfo.originalSize;
          const nextItemSize = throttle(between(prevItemSize * nextScale, itemInfo.minSize, itemInfo.maxSize), 0.01);

          sumPrevSize += prevItemSize;
          sumNextSize += nextItemSize;
          itemInfo.nextSize = nextItemSize;
        });
        // minSize, maxSize 적용 이후 gap이 남는 경우 전부 강제 scale 한다.
        if (throttle(sumNextSize - nextSize, 0.01)) {
          const lastScale = throttle(nextSize / sumNextSize, 0.01);

          itemInfos.forEach((itemInfo) => {
            itemInfo.nextSize *= lastScale;
          });
        }
        // 다시 index 순서로 정렬해야 포지션을 설정 가능함
        itemInfos.sort((a, b) => {
          return a.index - b.index;
        });
        itemInfos.forEach((itemInfo, j) => {
          const item = itemInfo.item;
          const nextItemSize = itemInfo.nextSize;
          item.addCSSGridRect({
            contentPos: isEndDirection ? prevPoint : prevPoint - nextItemSize,
            contentSize: nextItemSize,
          });

          if (isEndDirection) {
            prevPoint = item.cssContentPos! + item.cssContentSize! + contentGap;
          } else {
            prevPoint = item.cssContentPos! - contentGap;
          }

          if (j === length - 1) {
            let posOffset = 0;
            let sizeOffset = 0;

            if (isEndDirection) {
              sizeOffset = (item.cssContentPos! % 1 >= 0.5 ? 1 : 0)
                + (item.cssContentSize! % 1 >= 0.5 ? 1 : 0)
                + (scalePoint % 1 >= 0.5 ? -1 : 0);
            } else {
              posOffset = (item.cssContentPos! % 1 &lt; 0.5 ? -1 : 0)
                + (scalePoint % 1 &lt; 0.5 ? 1 : 0);
            }
            // Offset position and size need to be adjusted because they are rounded.


            item.addCSSGridRect({
              contentPos: item.cssContentPos! - posOffset,
              contentSize: item.cssContentSize! - sizeOffset,
            });
          }
        });
      });
    }
    // Finally, check whether startPos and min of the outline match.
    // If different, endOutline is updated.
    if (isStartContentAlign &amp;&amp; startPos !== Math.min(...endOutline)) {
      startPos = Math.max(...endOutline);
      endOutline = endOutline.map(() => startPos);
    }

    // if end items, startOutline is low, endOutline is high
    // if start items, startOutline is high, endOutline is low
    return {
      start: isEndDirection ? startOutline : endOutline,
      end: isEndDirection ? endOutline : startOutline,
    };
  }
  public getComputedOutlineSize(items = this.items) {
    const { align } = this.options;
    const inlineGap = this.getInlineGap();
    const containerInlineSize = this.getContainerInlineSize();
    const columnSizeOption = this.columnSize || this.outlineSize;
    const columnOption = this.column || this.outlineLength;
    let column = columnOption || 1;

    let columnSize = 0;

    if (align === "stretch") {
      if (!columnOption) {
        const maxStretchColumnSize = this.maxStretchColumnSize || Infinity;

        column = Math.max(1, Math.ceil((containerInlineSize + inlineGap) / (maxStretchColumnSize + inlineGap)));
      }
      columnSize = (containerInlineSize + inlineGap) / (column || 1) - inlineGap;
    } else if (columnSizeOption) {
      columnSize = columnSizeOption;
    } else if (items.length) {
      let checkedItem = items[0];

      for (const item of items) {
        const attributes = item.attributes;
        const columnAttribute = parseInt(attributes.column || "1", 10);
        const maxColumnAttribute = parseInt(attributes.maxColumn || "1", 10);

        if (
          item.updateState !== UPDATE_STATE.UPDATED
          || !item.inlineSize
          || columnAttribute !== 1
          || maxColumnAttribute !== 1
        ) {
          continue;
        }
        checkedItem = item;
        break;
      }
      const inlineSize = checkedItem.inlineSize || 0;

      columnSize = inlineSize;
    } else {
      columnSize = containerInlineSize;
    }
    return columnSize || 0;
  }
  public getComputedOutlineLength(items = this.items) {
    const inlineGap = this.getInlineGap();
    const columnOption = this.column || this.outlineLength;
    const columnCalculationThreshold = this.columnCalculationThreshold;
    let column = 1;

    if (columnOption) {
      column = columnOption;
    } else {
      const columnSize = this.getComputedOutlineSize(items);

      column = Math.max(
        1,
        Math.floor(
          (this.getContainerInlineSize() + inlineGap) /
          (columnSize - columnCalculationThreshold + inlineGap)
        )
      );
      if (!this.maxStretchColumnSize) {
        column = Math.min(
          items.length,
          column,
        );
      }
    }
    return column;
  }
  private _getAlignPoses(column: number, columnSize: number) {
    const { align } = this.options;
    const inlineGap = this.getInlineGap();
    const containerSize = this.getContainerInlineSize();
    const indexes = range(column);

    let offset = 0;
    let dist = 0;

    if (align === "justify" || align === "stretch") {
      const countDist = column - 1;

      dist = countDist ? Math.max((containerSize - columnSize) / countDist, columnSize + inlineGap) : 0;
      offset = Math.min(0, containerSize / 2 - (countDist * dist + columnSize) / 2);
    } else {
      dist = columnSize + inlineGap;
      const totalColumnSize = (column - 1) * dist + columnSize;

      if (align === "center") {
        offset = (containerSize - totalColumnSize) / 2;
      } else if (align === "end") {
        offset = containerSize - totalColumnSize;
      }
    }
    return indexes.map((i) => {
      return offset + i * dist;
    });
  }
}

export interface MasonryGrid extends Properties&lt;typeof MasonryGrid> {
}


/**
 * Align of the position of the items. If you want to use `stretch`, be sure to set `column` or `columnSize` option. ("start", "center", "end", "justify", "stretch")
 * @ko 아이템들의 위치의 정렬. `stretch`를 사용하고 싶다면 `column` 또는 `columnSize` 옵션을 설정해라.  ("start", "center", "end", "justify", "stretch")
 * @name Grid.MasonryGrid#align
 * @type {$ts:Grid.MasonryGrid.MasonryGridOptions["align"]}
 * @default "justify"
 * @example
 * ```js
 * import { MasonryGrid } from "@egjs/grid";
 *
 * const grid = new MasonryGrid(container, {
 *   align: "start",
 * });
 *
 * grid.align = "justify";
 * ```
 */


/**
 * The number of columns. If the number of columns is 0, it is automatically calculated according to the size of the container.  Can be used instead of outlineLength.
 * @ko 열의 개수. 열의 개수가 0이라면, 컨테이너의 사이즈에 의해 계산이 된다. outlineLength 대신 사용할 수 있다.
 * @name Grid.MasonryGrid#column
 * @type {$ts:Grid.MasonryGrid.MasonryGridOptions["column"]}
 * @default 0
 * @example
 * ```js
 * import { MasonryGrid } from "@egjs/grid";
 *
 * const grid = new MasonryGrid(container, {
 *   column: 0,
 * });
 *
 * grid.column = 4;
 * ```
 */


/**
 * The size of the columns. If it is 0, it is calculated as the size of the first item in items. Can be used instead of outlineSize.
 * @ko 열의 사이즈. 만약 열의 사이즈가 0이면, 아이템들의 첫번째 아이템의 사이즈로 계산이 된다. outlineSize 대신 사용할 수 있다.
 * @name Grid.MasonryGrid#columnSize
 * @type {$ts:Grid.MasonryGrid.MasonryGridOptions["columnSize"]}
 * @default 0
 * @example
 * ```js
 * import { MasonryGrid } from "@egjs/grid";
 *
 * const grid = new MasonryGrid(container, {
 *   columnSize: 0,
 * });
 *
 * grid.columnSize = 200;
 * ```
 */


/**
 * The size ratio(inlineSize / contentSize) of the columns. 0 is not set.
 * @ko 열의 사이즈 비율(inlineSize / contentSize). 0은 미설정이다.
 * @name Grid.MasonryGrid#columnSizeRatio
 * @type {$ts:Grid.MasonryGrid.MasonryGridOptions["columnSizeRatio"]}
 * @default 0
 * @example
 * ```js
 * import { MasonryGrid } from "@egjs/grid";
 *
 * const grid = new MasonryGrid(container, {
 *   columnSizeRatio: 0,
 * });
 *
 * grid.columnSizeRatio = 0.5;
 * ```
 */


/**
 * If stretch is used, the column can be automatically calculated by setting the maximum size of the column that can be stretched.
 * @ko stretch를 사용한 경우 최대로 늘릴 수 있는 column의 사이즈를 설정하여 column을 자동 계산할 수 있다.
 * @name Grid.MasonryGrid#maxStretchColumnSize
 * @type {$ts:Grid.MasonryGrid.MasonryGridOptions["maxStretchColumnSize"]}
 * @default Infinity
 * @example
 * ```js
 * import { MasonryGrid } from "@egjs/grid";
 *
 * const grid = new MasonryGrid(container, {
 *   align: "stretch",
 *   maxStretchColumnSize: 0,
 * });
 *
 * grid.maxStretchColumnSize = 400;
 * ```
 */
</code></pre>
        </article>
    </section>






        
        <!-- disqus code -->
        <div id="disqus_thread"></div>
        <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
        <a href="//disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        <!-- // disqus code -->
        

        <footer>
            Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 0.4.4</a> on Fri Dec 12 2025 13:28:13 GMT+0900 (Korean Standard Time)
        </footer>
    </div>
</div>
<script>prettyPrint();</script>
<script src="scripts/main.js"></script>
</body>
</html>
